<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cyk="http://primefaces.jsf.web.utility.cyk.org">
	
    		<p:toolbar>
    			<f:facet name="left">    				
		    		<h:outputText value="Créé le #{__page__.user.creationDate}" rendered="#{not empty __page__.user.creationDate}"/>		    				
		    		<h:outputText value=" | Transmis le #{__page__.user.sendingDate}" rendered="#{not empty __page__.user.sendingDate}"/>		    				
		    		<h:outputText value=" | Validé par l'ordonnateur le #{__page__.user.validationByOrdonnateurDate}" rendered="#{not empty __page__.user.validationByOrdonnateurDate}"/>
		    		<h:outputText value=" | Validé par la DGBF le #{__page__.user.validationByDGBFDate}" rendered="#{not empty __page__.user.validationByDGBFDate}"/>		    				
    			</f:facet>
    			<f:facet name="right">
    				<ui:fragment rendered="#{empty __page__.user.sendingDate}">
		    			<p:button value="Modifier" icon="fa fa-edit" outcome="#{__page__.isProgramManager ? 'userProgramManagerEditView' : 'userCreditManagerEditView'}">
			    			<f:param name="actionidentifier" value="update" />
			    			<f:param name="entityidentifier" value="#{__page__.user.identifier}" />
			    		</p:button>			 
			    		
			    		<ui:decorate template="/command/commandbutton/default.xhtml">
			    			<ui:param name="commandButton" value="#{__page__.sendCommandButton}"/>
			    		</ui:decorate>
			    		
			    		<ui:decorate template="/command/commandbutton/default.xhtml">
			    			<ui:param name="commandButton" value="#{__page__.deleteCommandButton}"/>
			    		</ui:decorate>
		    		</ui:fragment>
    				<p:button value="Imprimer" icon="fa fa-print" href="#{__page__.user.reportUniformResourceIdentifier}" target="_blank"/>
    			</f:facet>    			
    		</p:toolbar>
    		
    		<p:staticMessage severity="#{__page__.severity}" summary="#{__page__.summary}" detail="#{__page__.detail}"/>
    		<div class="ui-g">
    			
    			<div class="ui-g-12">	    			
	  				
	  				<div class="ui-g-8">
	  					<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-user"/></span>
			    				<h:outputText value="Identité" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
		    					<h:outputText value="#{__page__.user.civility}" />
			    				<h:outputText value=" #{__page__.user.firstName}" />
			    				<h:outputText value=" #{__page__.user.lastNames}" />
			    				<h:outputText value=" #{__page__.user.type}" />
			    				<h:outputText value=" #{__page__.user.registrationNumber}" />
		    				</div>		    						    				
	    				</div>
	    				
	    				<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-globe"/></span>
			    				<h:outputText value="Contacts" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
			    				<span class="ui-inputgroup-addon"><i class="fa fa-at"/></span>
			    				<h:outputText value="  #{__page__.user.electronicMailAddress}" />
			    				<span class="ui-inputgroup-addon"><i class="fa fa-envelope"/></span>
			    				<h:outputText value="  #{__page__.user.postalAddress}" />
			    				<span class="ui-inputgroup-addon"><i class="fa fa-phone"/></span>
		    					<h:outputText value="  #{__page__.user.deskPhoneNumber}" />
		    					<span class="ui-inputgroup-addon"><i class="fa fa-tag"/></span>
		    					<h:outputText value="  #{__page__.user.deskPost}" />
		    					<span class="ui-inputgroup-addon"><i class="fa fa-mobile-phone"/></span>
		    					<h:outputText value="  #{__page__.user.mobilePhoneNumber}" /> 
		    				</div>
	    				</div>
	    				
	    				<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-university"/></span>
		    					<h:outputText value="Unité administrative" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
		    					<h:outputText value="#{__page__.user.administrativeUnit}" />
		    				</div>
	    				</div>
	    				
	    				<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-flash"/></span>
		    					<h:outputText value="Fonction administrative" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
		    					<h:outputText value="#{__page__.user.administrativeUnitFunction}" />
		    				</div>
	    				</div>
	    				
	    				<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-file"/></span>
		    					<h:outputText value="Acte de nomination" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
		    					<h:outputText value=" N° #{__page__.user.administrativeUnitCertificateReference} " 
		    						rendered="#{not empty __page__.user.administrativeUnitCertificateReference}" style="float:left"/>
		    					
		    					<h:outputText value=" Signataire : #{__page__.user.administrativeUnitCertificateSignedBy} " 
		    						rendered="#{not empty __page__.user.administrativeUnitCertificateSignedBy}" style="float:left"/>
		    						
		    					<h:outputText value=" Signé le #{__page__.user.administrativeUnitCertificateSignedDate} " 
		    						rendered="#{__page__.user.administrativeUnitCertificateSignedDate != null}" style="float:left"/>		
		    						
			    				<p:outputPanel id="administrativeUnitCertificateFileOutputPanel" style="float:left">
			    					<ui:fragment rendered="#{__page__.administrativeUnitCertificateUserFile == null}">
			    						<p:commandButton id="uploadAdministrativeUnitCertificateFile" icon="fa fa-upload" 
			    							action="#{__page__.openDialog('uploadAdministrativeUnitCertificateFile')}" 
			    							update=":form:administrativeUnitCertificateFileOutputPanel,:form:dialogOutputPanel" oncomplete="PF('dialog').show();" 
			    							styleClass="cyk-margin-left-10-px" />
			    						<p:tooltip value="Joindre un fichier" for="uploadAdministrativeUnitCertificateFile" />
			    					</ui:fragment>
			    					
			    					<ui:fragment rendered="#{__page__.administrativeUnitCertificateUserFile != null}">
			    						<p:button id="viewAdministrativeUnitCertificateFile" icon="fa fa-eye" 
			    							href="#{__page__.user.administrativeCertificateUniformResourceIdentifier}" target="_blank" 
			    							styleClass="cyk-margin-left-10-px"/>
			    						<p:tooltip value="Voir le fichier joint" for="viewAdministrativeUnitCertificateFile" />
			    						
			    						<p:commandButton id="deleteAdministrativeUnitCertificateFile" icon="fa fa-remove" 
			    							action="#{__page__.deleteAdministrativeUnitCertificateFile}" 
		    								update=":form:administrativeUnitCertificateFileOutputPanel,:form:dialogOutputPanel" 
		    								styleClass="cyk-margin-left-10-px"/>
		    							<p:tooltip value="Supprimer le fichier joint" for="deleteAdministrativeUnitCertificateFile" />
			    					</ui:fragment>
			    				</p:outputPanel>	
		    				</div>			
	    				</div>
	    				
	    				
	    				<div class="ui-g-12">
		    				<div class="ui-g-3">
		    					<span class="ui-inputgroup-addon"><i class="fa fa-wrench"/></span>
		    					<h:outputText value="Fonction(s) budgétaire(s) demandée(s)" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    				</div>
		    				<div class="ui-g-9">
		    					<ui:repeat value="#{__page__.user.userFunctions}" var="userFunction" varStatus="varStatusObject">
		    						<h:outputText value="#{varStatusObject.index+1}. #{userFunction.function}" /><br/><br/>
		    					</ui:repeat>
		    					
		    					<!--
		    					<ui:decorate template="/collection/datatable/default.xhtml">
					    			<ui:param name="dataTable" value="#{__page__.functionsDataTable}"/>
					    			<ui:define name="dataTableDialogBody">
										<ui:decorate template="/layout/default.xhtml">
							    			<ui:param name="layout" value="#{__page__.functionsDataTableBodyLayout}"/>
							    			<ui:define name="cell0">
							    				<p:outputLabel for="ipt01" value="InputText" />
							    			</ui:define>
							    			<ui:define name="cell1">
							    				<p:inputText id="ipt01" value="" />
							    			</ui:define>
							    		</ui:decorate>	   
									</ui:define>	
					    		</ui:decorate>
					    		-->
		    				</div>
		    			</div>
		    			
		    			<!--
		    			<ui:fragment rendered="#{__page__.program != null}">
		    				<div class="ui-g-12">
			    				<div class="ui-g-3">
			    					<span class="ui-inputgroup-addon"><i class="fa fa-check"/></span>
			    					<h:outputText value="Programme" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
			    				</div>
			    				<div class="ui-g-9">
			    					<h:outputText value="#{__page__.program}" />
			    				</div>
			    			</div>
		    			</ui:fragment>
		    			-->
	    			</div>
	    			
	    			<!-- Photo -->
	    			<p:outputPanel id="photoFileOutputPanel" styleClass="ui-g-4">
	    				<p:graphicImage url="#{__page__.user.photoUniformResourceIdentifier}" alt="Photo" 
	    					rendered="#{__page__.photoUserFile != null and not empty __page__.user.photoUniformResourceIdentifier}" width="150" height="150"/>
	    				<h:outputText value="PHOTO" rendered="#{__page__.photoUserFile == null or empty __page__.user.photoUniformResourceIdentifier}"/>
	    				
    					<ui:fragment rendered="#{__page__.photoUserFile == null}">
    						<p:commandButton id="uploadPhotoFile" icon="fa fa-upload" 
    							action="#{__page__.openDialog('uploadPhotoFile')}" update=":form:photoFileOutputPanel,:form:dialogOutputPanel" oncomplete="PF('dialog').show();" 
    							styleClass="cyk-margin-left-10-px" />
    						<p:tooltip value="Joindre un fichier" for="uploadPhotoFile" />
    					</ui:fragment>
    					
    					<ui:fragment rendered="#{__page__.photoUserFile != null}">	    						
    						<p:commandButton id="deletePhotoFile" icon="fa fa-remove" action="#{__page__.deletePhotoFile}" 
   								update=":form:photoFileOutputPanel,:form:dialogOutputPanel" styleClass="cyk-margin-left-10-px"/>
   							<p:tooltip value="Supprimer le fichier joint" for="deletePhotoFile" />
    					</ui:fragment>
    				</p:outputPanel>
    			</div>	 			
    		</div>
    		
    		<p:outputPanel id="dialogOutputPanel">
    			<p:dialog id="dialog" widgetVar="dialog" modal="true" resizable="false" closable="true" closeOnEscape="true" draggable="false" 
    				header="#{__page__.dialogTitle}" dynamic="true">    			
	    			<ui:fragment rendered="#{__page__.dialogAction eq 'uploadAdministrativeUnitCertificateFile'}">
	    				<p:fileUpload id="file" fileUploadListener="#{__page__.listenAdministrativeUnitCertificateFileUpload}" 
		    				label="Sélectionner un fichier au format pdf ou image" multiple="false" mode="advanced" allowTypes="/(\.|\/)(pdf|jpg|jpeg|bmp|gif|png)$/" 
		    				sizeLimit="2097152" invalidSizeMessage="La taille du fichier ne doit pas être supérieur à deux(2) MB" 
		    				fileLimit="1" fileLimitMessage="Vous ne pouvez que sélectionner un et un seul fichier. veuillez télécharger le fichier déja sélectionner ou l'annuler pour en prendre un autre."
		    				oncomplete="PF('dialog').hide();"
		    				uploadLabel="Télécharger" cancelLabel="Annuler" 
		    				update=":form:administrativeUnitCertificateFileOutputPanel"/>
	    			</ui:fragment>
	    			
	    			<ui:fragment rendered="#{__page__.dialogAction eq 'uploadPhotoFile'}">
	    				<p:fileUpload id="photoFile" fileUploadListener="#{__page__.listenPhotoFileUpload}" 
		    				label="Sélectionner un fichier au format image" multiple="false" mode="advanced" allowTypes="/(\.|\/)(jpg|jpeg|bmp|gif|png)$/" 
		    				sizeLimit="2097152" invalidSizeMessage="La taille du fichier ne doit pas être supérieur à deux(2) MB" 
		    				fileLimit="1" fileLimitMessage="Vous ne pouvez que sélectionner un et un seul fichier. veuillez télécharger le fichier déja sélectionner ou l'annuler pour en prendre un autre."
		    				oncomplete="PF('dialog').hide();"
		    				uploadLabel="Télécharger" cancelLabel="Annuler" 
		    				update=":form:photoFileOutputPanel" previewWidth="100" />
	    			</ui:fragment>		
	    		</p:dialog>
    		</p:outputPanel>
    	
</ui:composition>
