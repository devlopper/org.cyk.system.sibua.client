<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html">
	
	<ui:include src="__dataTableColumnToggler__.xhtml"/>
	
	<p:column headerText="Code" width="150" filterBy="#{administrativeUnit.code}">
		<h:outputText value="#{administrativeUnit.code}" />
	</p:column>
 	
 	<p:column headerText="Libellé" filterBy="#{administrativeUnit.name}">
 		<h:outputText value="#{administrativeUnit.name}" />
 	</p:column>
 	
 	<p:column headerText="Section" width="100" filterBy="#{administrativeUnit.section}" rendered="#{sectionRendered}">
 		<f:facet name="filter">
 			<p:autoComplete onchange="PF('#{dataTableWidgetVar}').filter()" placeholder="Rechercher..."
		    	var="section" itemValue="#{section.code}" itemLabel="#{section}"
		    	completeMethod="#{sectionController.readByString}" cache="true"
		    	maxResults="5" queryDelay="500" emptyMessage="-- Aucun résultat --"
		    >
		    	<p:ajax event="itemSelect" oncomplete="PF('#{dataTableWidgetVar}').filter()" />
		    </p:autoComplete>
		</f:facet>
 		<h:outputText value="#{administrativeUnit.section.code}" />
 	</p:column>
 	
 	<p:column headerText="Groupe de service" width="150" filterBy="#{administrativeUnit.serviceGroup}">
 		<f:facet name="filter">
 			<p:autoComplete onchange="PF('#{dataTableWidgetVar}').filter()" placeholder="Rechercher..."
		    	var="serviceGroup" itemValue="#{serviceGroup.code}" itemLabel="#{serviceGroup}"
		    	completeMethod="#{serviceGroupController.readByString}" cache="true"
		    	maxResults="5" queryDelay="500" emptyMessage="-- Aucun résultat --"
		    >
		    	<p:ajax event="itemSelect" oncomplete="PF('#{dataTableWidgetVar}').filter()" />
		    </p:autoComplete>
		</f:facet>
 		<h:outputText value="#{administrativeUnit.serviceGroup.code}" />
 		<h:outputText value=" #{administrativeUnit.serviceGroup.name}" rendered="#{param['showName']}"/>
 	</p:column> 	
 	
 	<p:column headerText="CFAP" width="150" filterBy="#{administrativeUnit.functionalClassification}">
 		<f:facet name="filter">
 			<p:autoComplete onchange="PF('#{dataTableWidgetVar}').filter()" placeholder="Rechercher..."
		    	var="functionalClassification" itemValue="#{functionalClassification.code}" itemLabel="#{functionalClassification}"
		    	completeMethod="#{functionalClassificationController.readByString}" cache="true"
		    	maxResults="5" queryDelay="500" emptyMessage="-- Aucun résultat --"
		    >
		    	<p:ajax event="itemSelect" oncomplete="PF('#{dataTableWidgetVar}').filter()" />
		    </p:autoComplete>
		</f:facet>
 		<h:outputText value="#{administrativeUnit.functionalClassification.code}" />
 		<h:outputText value=" #{administrativeUnit.functionalClassification.name}" rendered="#{param['showName']}"/>
 	</p:column>
 	
 	<p:column headerText="Localisation" width="150" filterBy="#{administrativeUnit.localisation}">
 		<f:facet name="filter">
 			<p:autoComplete onchange="PF('#{dataTableWidgetVar}').filter()" placeholder="Rechercher..."
		    	var="localisation" itemValue="#{localisation.code}" itemLabel="#{localisation}"
		    	completeMethod="#{localisationController.readByString}" cache="true"
		    	maxResults="5" queryDelay="500" emptyMessage="-- Aucun résultat --"
		    >
		    	<p:ajax event="itemSelect" oncomplete="PF('#{dataTableWidgetVar}').filter()" />
		    </p:autoComplete>
		</f:facet>
 		<h:outputText value="#{administrativeUnit.localisation.code}" />
 		<h:outputText value=" #{administrativeUnit.localisation.name}" rendered="#{param['showName']}"/>
 	</p:column>
 	 	
 	<!--
 	<p:column headerText="Localisation géographique" width="150"><h:outputText value="#{administrativeUnit.localisation.name}" /></p:column>
 	-->
 	
 	<ui:include src="__dataTableColumnActions__.xhtml"/>
  	
  	<ui:include src="__dataTableRowExpansion__.xhtml"/>
  	
</ui:composition>